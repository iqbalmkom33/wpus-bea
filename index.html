<script>
    function p(t){console.log(t);}

    function readTextFile(file) {
        let hostname = 'https://'+window.location.hostname+'/';
        let curUrl = window.location.href;

        let slug = curUrl.split(hostname)[1];

        p('hostname='+hostname); p('curUrl='+curUrl); p('slug='+slug);

        var rawFile = new XMLHttpRequest();
        rawFile.open("GET", file, false);
        rawFile.onreadystatechange = function () {
            if(rawFile.readyState === 4)  {
                if(rawFile.status === 200 || rawFile.status == 0) {
                    var allText = rawFile.responseText;
                    //console.log(allText);
                    let j = JSON.parse(allText);
                    let jSlug = j[slug];

                    if(jSlug == undefined){
                        console.log('not registered'); // direct to moneysite
                        //let weblink = 'web-beawinvipus' 
                        //window.location.replace = "https://oucmaltiph.net/4/8472619?var=pro8472619_"+weblink;
                    }else{
                        let linkUang    = jSlug["linkUang"];
                        let linkArtikel = jSlug["linkArtikel"];                        
                        //p(linkArtikel);    //p(linkUang);

                        let cript = linkUang.split("/").join("wqslash")
                                    .split(":").join("wqcolon")
                                    .split("?").join("wqmark")
                                    .split("=").join("wqequal");

                        let urlQs = linkArtikel+"?wqqs="+cript;

                        //window.location.href = urlQs.split("/?").join("?");
                        console.log(urlQs);
                    }
                }
            }
        }
        rawFile.send(null);
    }

    readTextFile("slug_urls.json");
</script>